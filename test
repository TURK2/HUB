-- โหลด Rayfield
local Rayfield = loadstring(game:HttpGet("https://sirius.menu/rayfield"))()

-- ลิงก์ไฟล์คีย์แบบ RAW
local KeyURL = "https://raw.githubusercontent.com/TURK2/HUB/main/key"

-- โหลดไฟล์คีย์จาก GitHub
local RawKeys = game:HttpGet(KeyURL)

-- แปลงไฟล์คีย์เป็นตารางระดับ
local KeyList = {}

for line in string.gmatch(RawKeys, "[^\r\n]+") do
    local Level, Key = string.match(line, "(.+):(.+)")
    if Level and Key then
        KeyList[Key] = Level  -- ["PRE-222"] = "พรีเมี่ยม"
    end
end

-- สร้างหน้าต่างหลัก
local Window = Rayfield:CreateWindow({
    Name = "เมนูหลักของ HUB",
    LoadingTitle = "กำลังโหลดระบบ...",
    LoadingSubtitle = "ระบบคีย์หลายระดับ (ภาษาไทย)",

    ConfigurationSaving = {
        Enabled = true,
        FolderName = "HUB_ไทย",
        FileName = "การตั้งค่า"
    },

    KeySystem = true,

    KeySettings = {
        Title = "ระบบคีย์ภาษาไทย",
        Subtitle = "กรุณาใส่รหัสผ่านให้ถูกต้อง",
        Note = "รับรหัสได้ใน Discord หรือผ่านผู้ดูแล",

        FileName = "เก็บคีย์",
        SaveKey = false,
        GrabKeyFromSite = false, -- ปิดอันเดิมของ Rayfield

        Key = {"ใช้คีย์จากลิงก์ GitHub เท่านั้น!"} -- ใส่อะไรก็ได้
    }
})

-- ดึงรหัสที่ผู้ใช้กรอก
local UserKey = Rayfield.Flags.KeySystemKey.CurrentValue

-- ตรวจสอบระดับของผู้ใช้
local UserLevel = KeyList[UserKey]

if UserLevel == nil then
    Rayfield:Notify({
        Title = "รหัสไม่ถูกต้อง",
        Content = "กรุณาตรวจสอบรหัสอีกครั้ง",
        Duration = 6,
        Image = "info"
    })
else
    Rayfield:Notify({
        Title = "เข้าสู่ระบบสำเร็จ",
        Content = "ระดับของคุณคือ: " .. UserLevel,
        Duration = 6,
        Image = "check"
    })
end

-- สร้างแท็บตามระดับ
local Tab_Free     = Window:CreateTab("เมนูฟรี")
local Tab_Premium  = Window:CreateTab("เมนูพรีเมี่ยม")
local Tab_VIP      = Window:CreateTab("เมนูวีไอพี")
local Tab_Admin    = Window:CreateTab("เมนูแอดมิน")
local Tab_Owner    = Window:CreateTab("เมนูเจ้าของ")

-- ซ่อนทั้งหมดก่อน
Tab_Free:SetVisibility(false)
Tab_Premium:SetVisibility(false)
Tab_VIP:SetVisibility(false)
Tab_Admin:SetVisibility(false)
Tab_Owner:SetVisibility(false)

-- เปิดแท็บตามระดับ
if UserLevel == "ฟรี" then
    Tab_Free:SetVisibility(true)
end

if UserLevel == "พรีเมี่ยม" then
    Tab_Free:SetVisibility(true)
    Tab_Premium:SetVisibility(true)
end

if UserLevel == "วีไอพี" then
    Tab_Free:SetVisibility(true)
    Tab_Premium:SetVisibility(true)
    Tab_VIP:SetVisibility(true)
end

if UserLevel == "แอดมิน" then
    Tab_Free:SetVisibility(true)
    Tab_Premium:SetVisibility(true)
    Tab_VIP:SetVisibility(true)
    Tab_Admin:SetVisibility(true)
end

if UserLevel == "เจ้าของ" then
    Tab_Free:SetVisibility(true)
    Tab_Premium:SetVisibility(true)
    Tab_VIP:SetVisibility(true)
    Tab_Admin:SetVisibility(true)
    Tab_Owner:SetVisibility(true)
end


-- ตัวอย่างปุ่มในเมนูฟรี
Tab_Free:CreateButton({
    Name = "ฟังก์ชันพื้นฐาน",
    Callback = function()
        print("ใช้งานเมนูฟรี")
    end
})

-- ตัวอย่างปุ่มใน Premium
Tab_Premium:CreateButton({
    Name = "พรีเมี่ยมฟังก์ชัน",
    Callback = function()
        print("ใช้เมนูพรีเมี่ยม")
    end
})

-- ตัวอย่างเมนู VIP
Tab_VIP:CreateButton({
    Name = "ฟังก์ชันวีไอพีขั้นสูง",
    Callback = function()
        print("VIP Function")
    end
})

-- ตัวอย่างเมนู Admin
Tab_Admin:CreateButton({
    Name = "จัดการระบบ (Admin)",
    Callback = function()
        print("ADMIN MENU")
    end
})

-- ตัวอย่างเมนู Owner
Tab_Owner:CreateButton({
    Name = "เมนูเจ้าของระบบ",
    Callback = function()
        print("OWNER POWER")
    end
})